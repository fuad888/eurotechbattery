{% extends 'base.html' %}
{% load static i18n %}

{% block content %}

<!-- HERO – Battery-themed header -->
<section class="hero position-relative text-white text-center overflow-hidden"
         style="max-height: 15vh; background: {{ settings.hero_bg_color }};">
    <div class="container position-relative" style="z-index: 2;">
        <div class="row align-items-center min-vh-60">
            <div class="col-lg-10 mx-auto">
                <h6 class="text-uppercase text-warning fw-bold animate__animated animate__fadeInDown">
                    {{ setting_obj.title }}
                </h6>
                <h1 class="display-3 fw-bold mb-4 animate__animated animate__fadeInUp">
                    {{ herosection_data.title|default:"Contact Us" }}
                </h1>
                <p class="lead fs-4 animate__animated animate__fadeInUp" style="animation-delay: 0.3s;">
                    {{ herosection_data.subtitle|default:"We are here to assist you with all your battery needs. Reach out to us for inquiries, support, or feedback." }}
                </p>
            </div>
        </div>
    </div>
    <div class="position-absolute bottom-0 start-0 end-0 text-center pb-3 opacity-30">
        <i class="bi bi-battery-full fs-1 mx-2"></i>
        <i class="bi bi-battery-charging fs-1 mx-2"></i>
        <i class="bi bi-battery-half fs-1 mx-2"></i>
    </div>
</section>

<!-- CONTACT FORM + INFORMATION -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row g-5 justify-content-center">

            <!-- LEFT: FORM -->
            <div class="col-lg-5">
                <div class="bg-white p-5 rounded-4 shadow-lg h-100" data-aos="fade-right">
                    <h2 class="text-center fw-bold mb-4 text-primary">{% trans "Contact Form" %}</h2>

                    {% if messages %}
                        {% for message in messages %}
                            <div class="alert alert-success alert-dismissible fade show" role="alert">
                                {{ message }}
                                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                            </div>
                        {% endfor %}
                    {% endif %}

                    <form method="post" action="{% url 'contact' %}">
                        {% csrf_token %}
                        {{ form.non_field_errors }}

                        <div class="mb-3">
                            <label class="form-label fw-bold">{{ form.name.label }}</label>
                            {{ form.name }}
                            <div class="text-danger small">{{ form.name.errors }}</div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">{{ form.email.label }}</label>
                            {{ form.email }}
                            <div class="text-danger small">{{ form.email.errors }}</div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">{{ form.phone.label }}</label>
                            {{ form.phone }}
                            <div class="text-danger small">{{ form.phone.errors }}</div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">{{ form.interest.label }}</label>
                            {{ form.interest }}
                            <div class="text-danger small">{{ form.interest.errors }}</div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">{{ form.message.label }}</label>
                            {{ form.message }}
                            <div class="text-danger small">{{ form.message.errors }}</div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">{{ form.captcha.label }}</label>
                            {{ form.captcha }}
                            <div class="text-danger small">{{ form.captcha.errors }}</div>
                        </div>

                        <button type="submit" class="btn btn-primary w-100 py-3 fw-bold shadow-lg" id="submitBtn" disabled>
                            {% trans "Submit" %}
                        </button>
                    </form>
                </div>
            </div>

            <!-- RIGHT: INFORMATION -->
            <div class="col-lg-5">
                <div class="bg-white p-5 rounded-4 shadow-lg h-100 d-flex flex-column justify-content-center" data-aos="fade-left">
                    
                    <!-- Header – hero gradient color -->
                    <h3 class="text-center fw-bold mb-4" 
                        style="background: linear-gradient(135deg, #1e3c72, #2a5298); 
                               -webkit-background-clip: text; 
                               -webkit-text-fill-color: transparent; 
                               background-clip: text;">
                        {% trans "Contact Details" %}
                    </h3>
            
                    <!-- Email -->
                     {% if setting_obj.email %}
                    <div class="text-center mb-4">
                        <i class="bi bi-envelope-fill fs-1 mb-2" style="color: #2a5298;"></i>
                        <p class="mb-1"><strong style="color: #1e3c72;">{% trans "Email" %}:</strong></p>
                        <a href="mailto:{{ setting_obj.email }}" 
                           class="text-decoration-none fw-bold" 
                           style="color: #2a5298; font-size: 1.1rem;">
                            {{ setting_obj.email }}
                        </a>
                    </div>
                    {% endif %}
            
                    <hr class="my-4" style="border-color: #2a5298;">
            
                    <!-- Manufactory -->
                    {% if setting_obj.address1 %}
                    <div class="text-center mb-4">
                        <i class="bi bi-building fs-1 mb-2" style="color: #2a5298;"></i>
                        <p class="mb-1"><strong style="color: #1e3c72;">{% trans "Manufactory" %}:</strong></p>
                        <p style="color: #2a5298; font-weight: 500;">{{ setting_obj.address1 }}</p>
                    </div>
                    {% endif %}
            
                    <!-- Head Office -->
                     {% if setting_obj.address2 %}
                    <div class="text-center mb-4">
                        <i class="bi bi-geo-alt-fill fs-1 mb-2" style="color: #2a5298;"></i>
                        <p class="mb-1"><strong style="color: #1e3c72;">{% trans "Head office" %}:</strong></p>
                        <p style="color: #2a5298; font-weight: 500;">{{ setting_obj.address2 }}</p>
                    </div>
                    {% endif %}
            
                    <!-- Phone -->
                     {% if setting_obj.phone or setting_obj.mobile %}
                    <div class="text-center">
                        <i class="bi bi-telephone-fill fs-1 mb-2" style="color: #2a5298;"></i>
                        <p class="mb-1"><strong style="color: #1e3c72;">{% trans "Phone" %}:</strong></p>
                        <a href="tel:{{ setting_obj.phone }}" 
                           class="d-block text-decoration-none fw-bold mb-1" 
                           style="color: #2a5298;">
                            {{ setting_obj.phone }}
                        </a>
                        <a href="tel:{{ setting_obj.mobile }}" 
                           class="d-block text-decoration-none fw-bold" 
                           style="color: #2a5298;">
                            {{ setting_obj.mobile }}
                        </a>
                    </div>
                    {% endif %}
            
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ – Bottom section -->
<section class="py-5 bg-white border-top">
    <div class="container">
        <div class="text-center" data-aos="fade-up">
            <h3 class="fw-bold mb-3 text-primary">{% trans "Frequently Asked Questions" %}</h3>
            <p class="text-muted mb-4">Frequently asked questions about batteries</p>
            <a href="{% url 'faq' %}" class="btn btn-outline-primary btn-lg px-5 py-3 fw-bold hover-zoom shadow-sm">
                <i class="bi bi-question-circle me-2"></i> {% trans "View FAQ" %}
            </a>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

<style>
    .form-control, .form-select {
        border-radius: 12px;
        padding: 12px 16px;
        font-size: 1rem;
        transition: all 0.3s ease;
    }
    .form-control:focus, .form-select:focus {
        border-color: #2a5298;
        box-shadow: 0 0 0 0.2rem rgba(42, 82, 152, 0.25);
    }
    .btn-primary {
        background: linear-gradient(135deg, #1e3c72, #2a5298);
        border: none;
        border-radius: 12px;
        font-weight: 600;
    }
    .btn-primary:disabled {
        background: #ccc !important;
        cursor: not-allowed;
    }
    .hover-zoom:hover {
        transform: scale(1.05);
        transition: 0.3s ease;
    }
    .shadow-lg {
        box-shadow: 0 15px 35px rgba(0,0,0,0.1) !important;
    }
    @media (max-width: 768px) {
        .display-3 { font-size: 2.5rem; }
        .fs-4 { font-size: 1.1rem !important; }
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    const form = document.querySelector('form');
    const submitBtn = document.getElementById('submitBtn');

    form.addEventListener('input', () => {
        let allFilled = true;
        form.querySelectorAll('input[required], select[required], textarea[required]').forEach(field => {
            if (!field.value.trim()) allFilled = false;
        });
        if (allFilled) {
            submitBtn.classList.remove('btn-outline-primary');
            submitBtn.classList.add('btn-primary');
            submitBtn.disabled = false;
        } else {
            submitBtn.classList.remove('btn-primary');
            submitBtn.classList.add('btn-outline-primary');
            submitBtn.disabled = true;
        }
    });
</script>
{% endblock %}